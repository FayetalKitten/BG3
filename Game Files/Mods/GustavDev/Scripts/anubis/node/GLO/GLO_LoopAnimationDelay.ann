game.states.GLO_LoopAnimationDelay = State{function ()

    modules = { "shared.util"}

    description = [[A very simple script to make a NPC loop an animation with a random delay to reduce syncing of animations. Mostly useful on NPCs that are just standing somewhere before a cutscene starts.]]

    params.loopingAnimation = { type = EParamType.String, required = true,
        help = [[Required. The animation to loop until the state is interrupted.]]
    }

    local anim = Animation(params.loopingAnimation)

    nodes.LoopAnimation = Action{
        function()
            mod.util.SleepRandom(0.1, 4.5)
            PlayAnimation(anim, false, true)
            mod.util.SleepRandom(0.1, 2.0)
            WaitForInterrupt()
        end,
        OnLeave = function()
            StopAnimation(me)
        end,
        OnInterrupt = function()
            StopAnimation(me)
        end
    }
end
}