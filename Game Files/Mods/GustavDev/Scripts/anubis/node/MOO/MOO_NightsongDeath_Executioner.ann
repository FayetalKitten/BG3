game.states.MOO_NightsongDeath_Executioner = State{function ()
    description = [[Waiting for the player at the entrance of Moonrise after they've killed Nightsong]]

    modules = { "shared.dialog", "shared.moveto" }

    local idlePoint = Entity("S_MOO_NSDeathZrellPoint_ff75df90-edac-49f6-9f0f-915f2b2ba135")
    local AD = Dialog("MOO_NightsongDeath_AD_ZrellWaiting_d35ed689-5df2-02cf-a67e-089548eea545")
    local knowsZrellFlag = Flag("MOO_Execution_Knows_Executioner_53052e40-df9b-90a0-ad65-f2c06f996666")
    local outcastFlag = Flag("MOO_MoonriseTower_State_Outcast_93565546-9052-4776-8563-2a1aca8d899e")

    nodes.Waiting = Action {
        function()
            if mod.moveto.MoveToPoint(idlePoint,  MovementSpeed.Walk, me) then
                LookFrom(idlePoint)
                if GetFlag(knowsZrellFlag) and not GetFlag(outcastFlag) then
                    mod.dialog.StartCheckedAutomatedDialogRateLimited(
                    AD,
                    {
                        waitForCompletion = true,
                        minDelay = 20.0,
                    },
                    me
                    )
                end
            else
                SteerTo(idlePoint)
            end
            Sleep(1)
        end
    }

end
}