game.states.CRE_General_QuarterMistress = State 
{
    function()
    description = [[The main trader of the Gith Creche]]
    modules = {"shared.dialog", "shared.util", }

    ------------------------------------------------
    -- Params

    ------------------------------------------------
    params.SellingPosition = {
        type= EParamType.String,
        required = false,
        default = nil,
        help = [[The trigger position the quartermistress should stand at and sell her goods.]]
    }
    ------------------------------------------------
    -- Local State variables

    ------------------------------------------------ 

    ------------------------------------------------
    -- Helper functions
    ------------------------------------------------
 
    ------------------------------------------------
    -- State (self) node functions
    ------------------------------------------------
    local playerHasAccess = Flag("CRE_UpperGuards_State_GainedAccess_764df691-d1f0-4bde-ba36-73c4abe6a4e7")

    ------------------------------------------------
    -- Nodes

    -- Action

    
    nodes.Action_WaitInCorridor = Action{
        function()
           WaitForInterrupt()
        end,
 
        Valid = function()
            return not GetFlag(playerHasAccess)
        end
    }
    

    nodes.StandAtTrigger = Proxy {
        game.states.GLO_StandAtTrigger,
        params = {
            trigger = params.SellingPosition
        },
        

        Valid = function()
            return GetFlag(playerHasAccess)
        end
    }

    ------------------------------------------------
    -- Events   
    ------------------------------------------------

end
}