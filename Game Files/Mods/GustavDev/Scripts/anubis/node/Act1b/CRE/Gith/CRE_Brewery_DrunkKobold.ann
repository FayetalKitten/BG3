game.states.CRE_Brewery_DrunkKobold = State{function()
    description = [[Drunk kobolds behaviour]]
    modules = {"shared.dialog"}

    ------------------------------------------------
    -- Params
    params.DrunkDance = {
        type = EParamType.String,
        required = false,
        help=[[The dancing animation for this Kobold.]]
    }
    ------------------------------------------------

    ------------------------------------------------
    -- Local State variables
    local danceAnim = Animation(params.DrunkDance)
    ------------------------------------------------ 

    ------------------------------------------------
    -- Helper functions
    ------------------------------------------------
 
    ------------------------------------------------
    -- State (self) node functions
    ------------------------------------------------
    
    ------------------------------------------------
    -- Nodes

    -- Action
    -- Unless killed, the guards keep talking with a rate limited AD
    nodes.Action_Dance = Action{
        function()
            if  danceAnim ~= nil then
                PlayAnimation(danceAnim,false,true)
            end
            
        end,

        Valid = function()
            return danceAnim ~= nil
        end
    }

    nodes.Fallback = Action{
        function()
            WaitForInterrupt()
        end
    }    

    ------------------------------------------------
    
    ------------------------------------------------
    -- Events
    ------------------------------------------------

end
}