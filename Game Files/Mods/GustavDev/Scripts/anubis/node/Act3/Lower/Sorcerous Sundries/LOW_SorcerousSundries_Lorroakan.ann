game.states.LOW_SorcerousSundries_Lorroakan = State{function()
    modules = {"shared.util" ,"shared.moveto","shared.items","shared.math"}
    -----------------------------------------
    -- Nodes
    local immortalFlag = Flag("LOW_SorcerousSundries_State_NightsongCaged_d9739530-c72a-4ad8-96f0-7ec71bbcfd98")
    local ramazithThrone = Entity("FUR_GEN_BookThrone_A_000_2c72e1f6-9dbb-4675-959b-14d781f05a00")
    local wanderPos = Entity("S_LOW_SorcerousSundries_RamazithRolanWanderTrigger_2b87243c-88ed-4b84-9457-a30a1359e390")
    local readAnim = Animation("CUST_Reading_Book_01_c3af4377-7383-4aeb-a067-d8c36e82f716")
    local confrontationFlag = Flag("LOW_SorcerousSundries_State_FinalConfrontationOngoing_d2be5d4b-d315-4b28-9c76-78419b48e64f")



    nodes.InConfrontation = Action {
        function()
            if CanReposeOn(me, ramazithThrone) then
                try
                    UseItem(ramazithThrone.Item)
                end
            end
            WaitForInterrupt()
        end,
        OnLeave = function()
            EndRepose(me)
        end,
        CanEnter = function()
            return GetFlag(confrontationFlag)
        end,
    }
    nodes.InTower= Action {
        
        function()
            Sleep(mod.math.random(3, 9))
            PlayAnimation(readAnim, true, false)
            if CanReposeOn(me, ramazithThrone) then
                try
                    UseItem(ramazithThrone.Item)
                    mod.util.SleepRandom(10.0, 20.0)
                    EndRepose(me)
                end
            end
            Wander(15.0,mod.math.random(8.0,12.0),MovementSpeed.Walk,wanderPos)
            Sleep(mod.math.random(3, 9))
            PlayAnimation(readAnim, true, false)
            Wander(15.0,mod.math.random(10.0,15.0),MovementSpeed.Walk,wanderPos)
            
            
        end, 
        
        
        Valid = function()
            return not GetFlag(confrontationFlag)
        end
    
    }
    nodes.Fallback = Action {

        function()
            WaitForInterrupt()
        end
    }

end
}