game.states.LOW_CazadorsPalace_Ballroom_Rat = State {

    function()

        params.atCorpsePos = {
            type = EParamType.String,
            required = true,
        }

        modules = { "shared.util" }

        local atCorpsePos = Entity(params.atCorpsePos)
        local maxDistanceToCorpse = 1.0
        local eatingCorpseAnim = Animation("CUST_EatingCorpse_01_ea42da9e-15b5-4404-8fe2-9c0080b019c9")

        nodes.MoveToCorpse = Proxy{
            game.states.GLO_StandAtTrigger,
            params = {
                trigger = params.atCorpsePos,
                acceptanceRadius = maxDistanceToCorpse,
            },
            CanEnter = function()
                return GetDistanceTo(me, atCorpsePos) > maxDistanceToCorpse
            end,
            OnEnter = function()
			-- patching the distance
                if maxDistanceToCorpse == 0.5 then
                    maxDistanceToCorpse = 1.0
                end
            end
        }

        nodes.EatCorpse = Action {
            function()
                LookFrom(atCorpsePos)
                mod.util.SleepRandom(1.0, 3.0)
                PlayAnimation(eatingCorpseAnim, true)
                mod.util.SleepRandom(3.0, 9.0)
            end
        }
    end

}
