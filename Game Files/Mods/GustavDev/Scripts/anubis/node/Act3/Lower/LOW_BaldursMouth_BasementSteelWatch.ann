game.states.LOW_BaldursMouth_BasementSteelWatch = State{
    function()

        modules = { "shared.moveto"}

        params.waitTimeMin = {type = EParamType.Number,required = false,default = 2.0,
        help = [[Waiting duration for spline points with the script event 'Wait' on that point (edit it on the spline).]]}

        params.waitTimeMax = {type = EParamType.Number,required = false,default = 2.0,
        help = [[Waiting duration for spline points with the script event 'Wait' on that point (edit it on the spline).]]}

        params.spline = {type = EParamType.String, required = true,
        help = [[The spline to patrol.]]}

        ------------SPLINES----------
        local patrolSpline = Spline(params.spline)


        ------------BOOLS------------
        local bWait = false



        nodes.DoPatrol = Action{
            function()
                DoPatrol(patrolSpline, false, MovementSpeed.Stroll)
            end,
            Valid = function()
                return  bWait == false
            end
        }
    
        nodes.PatrolAnimation = Action{
            function()
                LookFrom(patrolSpline)
                Sleep(params.waitTimeMin+(math.random()*(params.waitTimeMax-params.waitTimeMin)))
                bWait = false
            end,
            Valid = function()
                return bWait == true
            end
        }

        ------------EVENTS----------
        events.SplineControlPointReached = function(e)
            if e.Event == "Wait" then
                bWait = true
            end
        end
    end
}



